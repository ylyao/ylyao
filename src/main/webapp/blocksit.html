<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="js/jquery-1.8.2.js"></script>
<script src="js/blocksit.js"></script>
<style>
	.bigPicture{
		display:none;
		position:absolute;
		top:0;
		left:0;
		background:#ccc;
	}
	
	.loadMore{
		position:relative;
		width:100px;
		margin-left: auto;
		margin-right: auto;
	}
	
	#container{
		position:relative;
		width:98%;
		margin-left: auto;
		margin-right: auto;
	}
	.grid{
		min-height:100px;
		background:#fff;
		margin:8px;
		font-size:12px;
		float:left;
		box-shadow: 0 1px 3px rgba(34,25,25,0.4);
		-moz-box-shadow: 0 1px 3px rgba(34,25,25,0.4);
		-webkit-box-shadow: 0 1px 3px rgba(34,25,25,0.4);
		
		-webkit-transition: top 1s ease, left 1s ease;
		-moz-transition: top 1s ease, left 1s ease;
		-o-transition: top 1s ease, left 1s ease;
		-ms-transition: top 1s ease, left 1s ease;
		
		border-radius: 8px;
	}
	
	.grid .imgholder{
		max-width:100%;
		margin:10px 0px 5px 0px;
	}
	
	.grid .imgholder img{
		max-width:100%;
		background:#ccc;
		display:block;
		border-radius: 3px;
	}

	.grid:hover {
		box-shadow: 0 1px 13px rgba(34,25,25,1);
		-moz-box-shadow: 0 1px 13px rgba(34,25,25,1);
		-webkit-box-shadow: 0 1px 13px rgba(34,25,25,1);
	}
	
	body{
		background-color: #fff;
	}
</style>
<script type="text/javascript">
	function init(){
		$("#container").show();
		$('#container').BlocksIt({
			numOfCol: 5,
			offsetX: 8,
			offsetY: 10,
			blockElement: '.grid'
		});
		$(".loadMore").show();
	}
	
	var page = 0;
	var pagesize = 16;
	var data ;
	
	function getInfo(){
		page ++;
		jQuery.ajax("jsPicture_findAllInfo.do",{
				type : "post",
				async : false,
				data:{
		        	"page":page,
		        	"pagesize":pagesize
		        },
				success : function(value) {
					data = value;
			}
		});
	}
	
	$(document).ready(function() {
		$(".loadMore").hide();
		$("#container").hide();
		
		getInfo();
		$("#container").empty();
		makePicture();
	});
	
	function makePicture(){
		var divModel = "";
		$.each(data,function(i,val){
		    divModel += '<div class="grid" data-size="1"><div id="'+val.id+'" style="display:none;">'+val.url+'</div>';
		    divModel +='<div class="imgholder"><a href="javascript:openPicture('+val.id+');" ><img src="'+val.miniUrl+'" /></a></div>';
		    if (val.remark != ''){
		    	divModel +='<div style="padding:0px 0px 15px 10px;">';
		    	divModel +='<div>___________________________________</div>';
			    divModel +='<div>'+val.remark+'</div>';
			    divModel +='</div>';
		    }
		    divModel +='</div>'
		});
		$("#container").append(divModel);
	}

	function loadMore() {
		getInfo();
		makePicture();
		init();
	}

	setTimeout("init()", 1000);

	function openPicture(id){
		var url = $("#" + id).html();
		$("#tempUrl").html(url);
		window.open('openPicture.html');
	}
	
</script>
</head>
<body>
	<div id="tempUrl" style="display:none;"></div>
	<div id="container">
	</div>
	<div class="loadMore"><a href="javascript:loadMore()">加载更多</a></div>
	<div id='bigPicture' class="bigPicture">
		
	</div>
</body>
</html>